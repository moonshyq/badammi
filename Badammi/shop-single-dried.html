<!DOCTYPE html>
<!--[if IE 7]><html class="no-js ie7 oldie" lang="en-US"> <![endif]-->
<!--[if IE 8]><html class="no-js ie8 oldie" lang="en-US"> <![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en">
    <head>
        <meta charset="utf-8">
        <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Fruits,Nuts,Vegetables">
        <meta name="author" content="Badammi">

        <title>Badammi</title>

        <!-- Favicon -->
        <link rel="apple-touch-icon" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png">
        <link rel="shortcut icon" href="assets/ico/favicon.ico">

        <!-- Font Icon -->
        <link href="assets/css/plugin/font-awesome.min.css" rel="stylesheet" type="text/css">  

        <!-- CSS Global -->
        <link href="assets/css/plugin/bootstrap.min.css" rel="stylesheet" type="text/css">  
        <link href="assets/css/plugin/bootstrap-select.min.css" rel="stylesheet" type="text/css"> 
        <link href="assets/css/plugin/owl.carousel.css" rel="stylesheet" type="text/css">
        <link href="assets/css/plugin/animate.css" rel="stylesheet" type="text/css"> 
        <link href="assets/css/plugin/jquery-ui.min.css" rel="stylesheet" type="text/css"> 
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">

        <!-- Custom CSS -->
        <link href="assets/css/theme.css" rel="stylesheet" type="text/css">

        <!-- Color CSS --> 

        <!--[if lt IE 9]>
        <script src="assets/js/plugin/html5shiv.js"></script>
        <script src="assets/js/plugin/respond.js"></script>
        <![endif]-->        
    </head>

    <body id="home" class="wide">

        <div id="loading">
            <div class="loader">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
        </div>

        <!-- WRAPPER -->
        <main class="wrapper"> 
            <!-- CONTENT AREA -->

            <!-- Main Header Start -->
            <header class="main-header white-bg">                  
                <div class="container-fluid rel-div">
                    <div class="col-lg-4 col-sm-8">
                        <div class="main-logo">
                            <a href="index.html"> <img alt="" src="assets/img/logo/main-logo.png" />  </a>
                            <span class="medium-font">ORGANIC STORE</span>
                        </div>
                    </div>

                   <div class="col-lg-6 responsive-menu">  
                        <div class="responsive-toggle fa fa-bars"> </div>
                        <nav class="fix-navbar" id="primary-navigation">            
                            <ul class="primary-navbar">                                                
                                <li class="dropdown">
                                    <a href="index.html">Home</a>                                            
                                </li> 
                                <li><a href="about-us.html">About Us</a></li>
                                <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" >Fresh products</a> 
                                    <ul id="fresh"class="dropdown-menu"> </ul> 
                                </li>
                                <li class="dropdown active"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" >Dried products</a> 
                                    <ul class="dropdown-menu"> </ul> 
                                </li>  
                                <li><a href="contact.html">Contact Us</a></li>   
                                        </li> 
                                    </ul>
                                </li>
                            </ul>                           
                        </nav>
                    </div>
                    <div class="responsive-toggle fa fa-bars"> </div>
                </div>  
            </header>
            <!-- / Main Header Ends -->   

            <!--Breadcrumb Section Start-->
            <!--Breadcrumb Section End-->


            <!-- Shop Starts-->
<section class="shop-wrap sec-space-bottom">
<div class="container rel-div pt-50">
        <div class="row align-items-start product-layout">
             <div class="col-lg-6 order-2 product-photo">
        <div class="prod-slider sync1"></div>

        <div class="sync2-container">
            <div class="sync2 owl-carousel"></div>
        </div>
        
    </div>
    <!-- Блок с текстом -->
        <div class="col-lg-6 order-1 product-info">
            <h3 class="section-title">
                <a href="#">
                    <strong id="fruit-name">Название</strong>
                </a>
        </h3>
        <span class="divider-2"></span>
        <div class="fsz-16">
            <p><strong><h3 id="composition-title">Composition:</h3></strong></p>
            <p id="fruit-description"><h2></h2></p>
            <span class="divider-2"></span>
        </div>
            <div class="fsz-16">
            <p><strong><h3 id="benefits-title">Benefits:</h3></strong></p>
            <ul id="fruit-benefits"><h2></h2></ul>
        </div>
        </div>
             
    </div>
    

    <!-- Фото -->
   
    
</div>

<div>



            </section>
            <!-- / Shop Ends -->      

            <!-- / CONTENT AREA -->

            <!-- FOOTER -->
            <footer class="page-footer"> 
                <section class="sec-space light-bg">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-3 col-sm-12 footer-widget">
                                <div class="main-logo">
                                    <a href="index.html"> <img alt="" src="assets/img/logo/main-logo.png" />  </a>
                                    <span class="medium-font">ORGANIC STORE</span>
                                </div>
                                <span class="divider-2"></span>
                                <div class="text-widget">
                                    <ul>
                                        <li> <i class="fa fa-map-marker"></i> <strong>Nerimaov Aga Neymatulla</strong> </li>
                                        <li> <i class="fa fa-envelope-square"></i> <span><a href="#">info@badammi.com</a> </span> </li>
                                        <li> <i class="fa fa-phone-square"></i> <span><a href="#">+994519640000</a> </span> </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-4 footer-widget">
                                <h2 class="title-1">  <span class="light-font">badammi  </span> <strong>information </strong> </h2>
                                <span class="divider-2"></span>
                                <ul class="list">
                                    <li> <a href="about-us.html"> About us </a> </li>
                                    <li> <a href="index.html"> All Producs </a> </li>
                                    <li>
                                        <div class="social-icons" style="margin-top: 15px;">
                                            <a href="https://www.youtube.com/" target="_blank" style="margin-right: 10px; color: #ff0000;">
                                                <i class="fab fa-youtube fa-lg"></i>
                                            </a>
                                            <a href="https://www.facebook.com/" target="_blank" style="margin-right: 10px; color: #1877f2;">
                                                <i class="fab fa-facebook fa-lg"></i>
                                            </a>
                                            <a href="https://www.instagram.com/" target="_blank" style="color: #e4405f;">
                                                <i class="fab fa-instagram fa-lg"></i>
                                            </a>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>
            </footer>
            <!-- /FOOTER -->

<div id="to-top-mb" class="to-top mb"> <i class="fa fa-arrow-circle-o-up"></i> </div>

        </main>
        <!-- /WRAPPER -->

        <!-- JS Global -->
        <script src="assets/js/plugin/jquery-2.2.4.min.js"></script>   
        <script src="assets/js/plugin/bootstrap.min.js"></script>
        <script src="assets/js/plugin/bootstrap-select.min.js"></script>       
        <script src="assets/js/plugin/owl.carousel.min.js"></script>
        <script src="assets/js/plugin/jquery-ui.min.js"></script>

        <!-- Custom JS -->   
        <script src="assets/js/theme.js"></script>


<script>
$(document).ready(function () {
    async function loadFruit() {
    const container = $("#product");
        try {
            const fruitId = new URLSearchParams(window.location.search).get("id");
            if (!fruitId) return console.warn("❌ Id не найден в URL");

            const apiUrl = `http://98.67.191.173:5000/Fruits/ShopOne?id=${fruitId}`;
            const response = await fetch(apiUrl, { headers: { "ngrok-skip-browser-warning": "true" } });
            if (!response.ok) throw new Error("Ошибка загрузки данных: " + response.status);
            const fruit = await response.json();

            $("#fruit-name").text(fruit.name);
            $("#fruit-description").text(`${fruit.composition}`);

            if (fruit.color) {
                $("#fruit-name").css("color", fruit.color);
                $("#fruit-description").css("color", fruit.color);
                $("#fruit-benefits").css("color", fruit.color);
                $("#composition-title").css("color", fruit.color);
                $("#benefits-title").css("color", fruit.color);
            }

            const mainSlider = $(".prod-slider.sync1");

            const mainImgUrl = `http://98.67.191.173:5000/photos/${fruit.id}.png`;
            const thumbnails = [mainImgUrl];

            mainSlider.append(`
                <div class="item active">
                    <img id="main-photo" src="${mainImgUrl}" alt="${fruit.name}" style="width:350px;object-fit:cover;border-radius:8px;cursor:grab;">
                </div>
            `);

            // --- Преимущества ---
            const benefitsList = $("#fruit-benefits");
            benefitsList.empty();
            if (fruit.benefits && fruit.benefits.length > 0) {
                fruit.benefits.forEach(benefit => benefitsList.append(`<li>${benefit}</li>`));
            }

            // --- Инициализация Owl Carousel ---
            mainSlider.owlCarousel({ items: 1, loop: false, dots: false, nav: true, navText: ["<",">"], smartSpeed: 500 });

            // --- Функция обновления главного фото ---
            function updateMainPhoto(index) {
    const newSrc = thumbnails[index];
    const mainPhoto = $("#main-photo");

    // Сначала делаем fade out
    mainPhoto.css("opacity", "0");

    setTimeout(() => {
        mainPhoto.attr("src", newSrc);
        mainPhoto.css("opacity", "1"); // плавный fade in
    }, 200); // половина времени перехода
     
}
        } catch (error) {
            console.error("Ошибка при загрузке фрукта:", error);
            $("#fruit-name").text("Не удалось загрузить фрукт");
            $("#fruit-description").text("");
        }
    }

    loadFruit();
});

// === Загрузка всех фруктов для меню ===
document.addEventListener("DOMContentLoaded", async () => {
    const apiUrl = "http://98.67.191.173:5000/Fruits/GetAllFruits";

    try {
        const response = await fetch(apiUrl, { headers: { "ngrok-skip-browser-warning": "true" } });
        if (!response.ok) throw new Error("Ошибка загрузки API");
        const fruits = await response.json();

        // --- Dried Products ---
        const driedDropdown = Array.from(document.querySelectorAll(".primary-navbar .dropdown")).find(drop => 
            drop.querySelector("a")?.textContent.toLowerCase().includes("dried products")
        );
        if (driedDropdown) {
            let driedMenu = driedDropdown.querySelector(".dropdown-menu");
            if (!driedMenu) { driedMenu = document.createElement("ul"); driedMenu.classList.add("dropdown-menu"); driedDropdown.appendChild(driedMenu); }
            driedMenu.innerHTML = "";
            fruits.filter(f => f.name.toLowerCase().includes("dried")).forEach(fruit => {
                const li = document.createElement("li");
                li.innerHTML = `<a class="fix-a" href="shop-single-dried.html?id=${fruit.id}">${fruit.name}</a>`;
                driedMenu.appendChild(li);
            });
            driedMenu.innerHTML += `<li><a class="fix-a" href="shop-2.html"><strong>All catalog</strong></a></li>`;
        }

        const freshMenu = document.getElementById("fresh");
        if (freshMenu) {
            freshMenu.innerHTML = "";
            fruits.filter(f => !f.name.toLowerCase().includes("dried")).forEach(fruit => {
                const li = document.createElement("li");
                li.innerHTML = `<a class="fix-a" href="shop-single.html?id=${fruit.id}">${fruit.name}</a>`;
                freshMenu.appendChild(li);
            });
            freshMenu.innerHTML += `<li><a class="fix-a" href="shop-1.html"><strong>All catalog</strong></a></li>`;
        }

    } catch (err) {
        console.error("Ошибка при загрузке фруктов:", err);
    }
});
</script>
<style>
.product-layout {
    display: flex;
    align-items: flex-start;
    justify-content: center;
    gap: 60px;
    flex-wrap: nowrap;
    margin-top: 40px;
}

#main-photo {
    width: 600px;
    height: 600px;
    object-fit: cover;
    border-radius: 20px;
    box-shadow: none;             /* убрали тень */
    border: none;                 /* убрали рамку, если была */
    outline: none;                /* убрали контур при клике */
    background: none;             /* убрали фон */
    transition: transform 0.4s ease;
}
#main-photo:hover {
    transform: scale(1.03);
}

/* Текст справа */
.product-info {
    flex: 1;
    padding: 20px 40px;
}

/* Название — в одну строку */
#fruit-name {
    font-size: 64px;
    font-weight: 800;
    white-space: nowrap; /* не переносить */
    overflow: hidden;
    text-overflow: ellipsis; /* если длинное, добавятся ... */
}

/* Подзаголовки и текст */
.fsz-16 h3 {
    font-size: 28px;
    margin-bottom: 10px;
}

#fruit-description,
#fruit-benefits li {
    font-size: 20px;
    line-height: 1.6;
}

/* Отступы и визуальный баланс */
.section-title {
    margin-bottom: 20px;
}

/* --- Адаптация под телефоны --- */
@media (max-width: 991px) {
    .product-layout {
        flex-direction: column;
        align-items: center;
        gap: 30px;
    }
    .product-photo, .product-info {
        width: 100%;
        padding: 0;
        text-align: center;
    }
    #main-photo {
        width: 90%;
        height: 450px;
        max-width: 400px;
    }
    #fruit-name {
        font-size: 48px;
        white-space: normal;
    }
}
    
#product img {
    width: 100%;
    height: auto;
    object-fit: contain;
}

#product .product-item {
    display: flex;
    justify-content: center;
    align-items: center;
}

#product img {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
}


    
#fruit-benefits {
    list-style-type: disc;        /* маркеры кружочками */
    padding-left: 40px;           /* отступ для маркеров */
    font-size: 18px;
    line-height: 1.5em;
}

/* Адаптация — на телефонах только один столбец */
@media (max-width: 768px) {
    #fruit-benefits {
        column-count: 1;
    }
}

/* === 2. Отступы между карточками снизу === */
#product {
    display: flex;
    flex-wrap: wrap;
    gap: 20px; /* расстояние между карточками */
}

#product .col-lg-3,
#product .col-md-4,
#product .col-sm-6 {
    padding: 0; /* убираем лишние отступы Bootstrap */
    flex: 1 1 calc(25% - 20px); /* чтобы карточки красиво распределялись */
    box-sizing: border-box;
}

@media (max-width: 991px) {
    #product .col-lg-3,
    #product .col-md-4,
    #product .col-sm-6 {
        flex: 1 1 calc(50% - 20px); /* 2 карточки в ряд на планшете */
    }
}

@media (max-width: 600px) {
    #product .col-lg-3,
    #product .col-md-4,
    #product .col-sm-6 {
        flex: 1 1 100%; /* по одной карточке на телефоне */
    }
}

.product-box {
    height: 450px; /* общая высота карточки */
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    align-items: center;
    text-align: center;
}

.product-media {
    width: 100%;
    aspect-ratio: 1 / 1; /* квадрат */
    background-color: #f8f8f8; /* фон, если фото не заполняет всё */
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    border-radius: 16px 16px 0 0;
}

.product-media img {
    width: 100%;
    height: 100%;
    object-fit: contain; /* сохраняет целое изображение */
    background-color: #fff;
    border-radius: 16px 16px 0 0;
}

.product-caption {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 10px;
    text-align: center;
    background-color: #fff;
    border-radius: 0 0 16px 16px;
}

.product-title strong {
    font-size: 16px;
    white-space: pre-line;
    line-height: 1.3em;
}

.product-box {
    border-radius: 100px;            /* степень закругления */
    overflow: hidden;               /* чтобы изображение не выходило за границы */
    box-shadow: 0 4px 12px rgba(0,0,0,0.15); /* лёгкая тень для объёма */
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.product-box:hover {
    transform: translateY(-15px);
    box-shadow: 0 8px 18px rgba(0,0,0,0.25);
}

.product-media img:hover {
    transform: scale(1.3);
    box-shadow: 0 8px 18px rgba(0,0,0,0.25);
}


.product-media img {
    border-radius: 16px 16px 0 0; /* скругляем только верхнюю часть картинки */
    width: 100%;
    height: auto;
    display: block;
}

.product-caption {
    background-color: #fff;
    border-radius: 0 0 16px 16px;  /* нижние углы */
    padding: 15px;
    text-align: center;
}

    #fruit-name {
    font-size: 100px; /* было 22px */
    font-weight: 700; /* чтобы выделялось */
    text-transform: uppercase;
}

/* Заголовок Composition */
#fruit-description {
    font-size: 16px; 
    
}

.fsz-16 {
    font-size: 24px; /* заголовок Composition */
    margin-bottom: 5px; /* чуть меньше отступ снизу */
}

.product-layout {
    display: flex;
    align-items: flex-start;
    gap: 40px;
    flex-wrap: wrap;
}


/* Чтобы на ПК текст был справа */
@media (min-width: 992px) {
    .product-info {
        order: 2;
        padding-right: 300px; /* текст будет первым — справа */
    }
    .product-photo {
        order: 1; /* фото второе — слева */
    }

    .product-layout {
        flex-wrap: nowrap; /* чтобы колонки не переносились */
    }

    .product-info, .product-photo {
        flex: 1;
    }
}
/* На телефоне текст переходит наверх */
@media (max-width: 991px) {
    .product-info {
        order: 1;
        width: 100%;
        text-align: center;
        margin-bottom: 20px;
    }

    .product-photo {
        order: 2;
        width: 100%;
        text-align: center;
    }

    #fruit-name {
        font-size: 70px;
    }

    #fruit-description {
        font-size: 22px;
    }
}
.photo-modal {
    display: none; /* изначально скрыто */
    position: fixed;
    z-index: 10000;
    padding-top: 60px;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.9);
    justify-content: center;
    align-items: center;
}

.photo-modal-content {
    margin: auto;
    display: block;
    max-width: 90%;
    max-height: 85vh;
    border-radius: 10px;
    box-shadow: 0 4px 25px rgba(255,255,255,0.3);
    animation: zoomIn 0.3s ease;
}

/* крестик закрытия */
.photo-close {
    position: absolute;
    top: 25px;
    right: 35px;
    color: #fff;
    font-size: 40px;
    font-weight: bold;
    cursor: pointer;
    transition: 0.3s;
}
.photo-close:hover {
    color: #f00;
}

/* эффект появления */
@keyframes zoomIn {
    from { transform: scale(0.8); opacity: 0; }
    to   { transform: scale(1); opacity: 1; }
}

</style>
<div id="photo-modal" class="photo-modal">
    <span class="photo-close">&times;</span>
    <img class="photo-modal-content" id="photo-full">
</div>
<script>
document.addEventListener("click", (e) => {
    if (e.target.id === "main-photo") {
        const modal = document.getElementById("photo-modal");
        const modalImg = document.getElementById("photo-full");
        modal.style.display = "flex";
        modalImg.src = e.target.src;
    }
});

// Закрытие по клику на крестик или вне картинки
document.querySelector(".photo-close").addEventListener("click", () => {
    document.getElementById("photo-modal").style.display = "none";
});
document.getElementById("photo-modal").addEventListener("click", (e) => {
    if (e.target.id === "photo-modal") {
        e.currentTarget.style.display = "none";
    }
});
</script>
    </body>
</html>