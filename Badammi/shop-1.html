<!DOCTYPE html>
<!--[if IE 7]><html class="no-js ie7 oldie" lang="en-US"> <![endif]-->
<!--[if IE 8]><html class="no-js ie8 oldie" lang="en-US"> <![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en">
    <head>
        <meta charset="utf-8">
        <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Fruits,Nuts,Vegetables">
        <meta name="author" content="Badammi">

        <title>Badammi</title>

        <!-- Favicon -->
        <link rel="apple-touch-icon" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png">
        <link rel="shortcut icon" href="assets/ico/favicon.ico">

        <!-- Font Icon -->
        <link href="assets/css/plugin/font-awesome.min.css" rel="stylesheet" type="text/css">  

        <!-- CSS Global -->
        <link href="assets/css/plugin/bootstrap.min.css" rel="stylesheet" type="text/css">  
        <link href="assets/css/plugin/bootstrap-select.min.css" rel="stylesheet" type="text/css"> 
        <link href="assets/css/plugin/owl.carousel.css" rel="stylesheet" type="text/css">
        <link href="assets/css/plugin/animate.css" rel="stylesheet" type="text/css"> 
        <link href="assets/css/plugin/jquery-ui.min.css" rel="stylesheet" type="text/css"> 
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">

        <!-- Custom CSS -->
        <link href="assets/css/theme.css" rel="stylesheet" type="text/css">

        <!-- Color CSS --> 

        <!--[if lt IE 9]>
        <script src="assets/js/plugin/html5shiv.js"></script>
        <script src="assets/js/plugin/respond.js"></script>
        <![endif]-->        
    </head>

    <body id="home" class="wide">

        <div id="loading">
            <div class="loader">
                <img alt="" style="width: 600px;" src="assets/img/logo/main-logo-loader.png"/>
            </div>
        </div>

        <!-- WRAPPER -->
        <main class="wrapper"> 
            <!-- CONTENT AREA -->

            <!-- Main Header Start -->
            <header class="main-header white-bg">                  
                <div class="container-fluid rel-div">
                    <div class="col-lg-4 col-sm-8">
                        <div class="main-logo">
                            <a href="index.html"> <img alt="" src="assets/img/logo/main-logo.png" />  </a>
                            <span class="medium-font">ORGANIC STORE</span>
                        </div>
                    </div>

                    <div class="col-lg-6 responsive-menu">  
                        <div class="responsive-toggle fa fa-bars"> </div>
                        <nav class="fix-navbar" id="primary-navigation">            
                            <ul class="primary-navbar">                                                
                                <li class="dropdown">
                                    <a href="index.html">Home</a>                                            
                                    
                                </li> 
                                <li><a href="about-us.html">About Us</a></li>
                                <li><a href="shop.html">All Catalog</a></li>
                                <li class="dropdown active"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" >Fresh products</a> 
                                    <ul id="fresh"class="dropdown-menu"> </ul> 
                                </li>
                                <li class="dropdown"> <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" >Dried products</a> 
                                    <ul class="dropdown-menu"> </ul> 
                                </li>
                                <li><a href="contact.html">Contact Us</a></li>   
                            </ul>                           
                        </nav>
                    </div>
                        <div class="responsive-toggle fa fa-bars"> </div>
                    </div>
                </div>  
            </header>
            <!-- / Main Header Ends -->   

            <!--Breadcrumb Section Start-->
            
            <!--Breadcrumb Section End-->


            <!-- Shop Starts-->
            <section class="shop-wrap sec-space-bottom">
                <div class="pattern"> 
                    <img alt="" src="assets/img/icons/white-pattern.png">
                </div>

                <div class="container rel-div">
                    <div class="row sort-bar">
                        <div class="icon"> <img alt="" src="assets/img/logo/logo-2.png" /> </div>
                    </div> 

                    <div class="divider-full-1"></div>

                    <div class="result-bar block-inline">
                        <h4 class="result-txt">search result <b> 125 </b> </h4>
                        <ul class="view-tabs">
                            <li class="active">
                                <a href="#grid-view" data-toggle="tab">                                                    
                                    <i class="fa fa-th" onclick="hidenonlist()"></i>
                                </a>
                            </li>
                            <li class="">
                                <a href="#list-view" data-toggle="tab">
                                    <i class="fa fa-th-list" onclick="hidelist()"></i>
                                </a>
                            </li>
                        </ul>
                    </div>
                    <div class="tab-content shop-content"> 
                        <div id="grid-view" class="tab-pane fade active in" role="tabpanel">
                            <div id="product" class="row"> 
                                
                            </div>
                        <div id="list-view" class="tab-pane fade" role="tabpanel">
                            <div id="listproduct" class="row"> 
                                
                            </div>
                        </div>
                    </div>
            </section>
            <!-- / Shop Ends -->      

            <!-- / CONTENT AREA -->

            <!-- FOOTER -->
            <footer class="page-footer"> 
                <section class="sec-space light-bg">
                    <div class="container">
                        <div class="row">
                            <div class="col-md-3 col-sm-12 footer-widget">
                                <div class="main-logo">
                                    <a href="index.html"> <img alt="" src="assets/img/logo/main-logo.png" />  </a>
                                    <span class="medium-font">ORGANIC STORE</span>
                                </div>
                                <span class="divider-2"></span>
                                <div class="text-widget">
                                    <ul>
                                        <li> <i class="fa fa-map-marker"></i> <strong>Nerimaov Aga Neymatulla</strong> </li>
                                        <li> <i class="fa fa-envelope-square"></i> <span><a href="#">info@badammi.com</a> </span> </li>
                                        <li> <i class="fa fa-phone-square"></i> <span><a href="#">+994519640000</a> </span> </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-4 footer-widget">
                                <h2 class="title-1">  <span class="light-font">badammi  </span> <strong>information </strong> </h2>
                                <span class="divider-2"></span>
                                <ul class="list">
                                    <li> <a href="about-us.html"> About us </a> </li>
                                    <li> <a href="index.html"> All Producs </a> </li>
                                    <li>
                                        <div class="social-icons" style="margin-top: 15px;">
                                            <a href="https://www.youtube.com/" target="_blank" style="margin-right: 10px; color: #ff0000;">
                                                <i class="fab fa-youtube fa-lg"></i>
                                            </a>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>
            </footer>
            <!-- /FOOTER -->

            <div id="to-top-mb" class="to-top mb"> <i class="fa fa-arrow-circle-o-up"></i> </div>
            
        </main>
        <!-- /WRAPPER -->

        <!-- JS Global -->
        <script src="assets/js/plugin/jquery-2.2.4.min.js"></script>   
        <script src="assets/js/plugin/bootstrap.min.js"></script>
        <script src="assets/js/plugin/bootstrap-select.min.js"></script>       
        <script src="assets/js/plugin/owl.carousel.min.js"></script>
        <script src="assets/js/plugin/jquery-ui.min.js"></script>

        <!-- Custom JS -->   
        <script src="assets/js/theme.js"></script>

        <script>
const apiUrl = "/api/Fruits/GetAllFruits";

async function loadProducts() {
    console.log("test");
    const container = $("#product"); // div –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫
    const resultTxt = $(".result-bar .result-txt b"); // —á–∏—Å–ª–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
    const second = $("#listproduct"); // –≤—Ç–æ—Ä–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

    try {
        // –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—Ä–æ—Å –∫ API —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º
        const response = await fetch(apiUrl, {
            headers: {
                "ngrok-skip-browser-warning": "true"
            }
        });

        if (!response.ok) throw new Error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Å API");

        const fruits = await response.json();

        // üî• –û—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ –ø—Ä–æ–¥—É–∫—Ç—ã, –≥–¥–µ –ù–ï–¢ "dried" –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏
        const filteredFruits = fruits.filter(fruit =>
            !fruit.name.toLowerCase().includes("dried")
        );

        container.empty();
        second.empty();
        resultTxt.text(filteredFruits.length);

        // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º
        for (const fruit of filteredFruits) {
            const photoResponse = await fetch(`/api/photos/${fruit.id}.png`, {
                headers: {
                    "ngrok-skip-browser-warning": "true"
                }
            });

            let photoUrl;
            if (photoResponse.ok) {
                const blob = await photoResponse.blob();
                photoUrl = URL.createObjectURL(blob);
            } else {
                photoUrl = "img/placeholder.png"; // –∑–∞–ø–∞—Å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            }

            // –ü–µ—Ä–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ (—Å–µ—Ç–∫–æ–π)
            const card = `
                <div class="col-lg-3 col-md-4 col-sm-6" onclick="change(${fruit.id})"> 
                    <div class="product-box"> 
                        <div class="product-media"> 
                            <img class="prod-img" alt="${fruit.name}" src="${photoUrl}" />     
                            <div class="prod-icons"> 
                                <a href="shop-single.html?id=${fruit.id}" data-toggle="modal" class="fa fa-expand"></a>
                            </div>
                        </div>                                           
                        <div class="product-caption"> 
                            <h3 class="product-title">
                                <a href="#"><strong>${fruit.name}</strong></a>
                            </h3>
                        </div>
                    </div>
                </div>
            `;
            container.append(card);

            // –í—Ç–æ—Ä–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ (—Å–ø–∏—Å–∫–æ–º)
            const listCard = `
                <div class="col-md-6 col-sm-12" onclick="change(${fruit.id})"> 
                    <div class="deal-item list-view">
                        <div class="deal-icons">                                         
                            <a href="shop-single.html?id=${fruit.id}" data-toggle="modal" class="fa fa-expand"></a>                                      
                        </div>
                        <div class="deal-content">
                            <div class="deal-text">
                                <h4 class="sub-title"> ORGANIC FRUITS </h4>
                                <h2 class="fsz-30 pb-15"> <a href="#"><strong>${fruit.name}</strong></a> </h2>
                                <p>${fruit.composition}</p>
                            </div>
                            <div class="img images"> 
                                <img alt="${fruit.name}" src="${photoUrl}">
                            </div>
                        </div>
                    </div>
                </div>
            `;
            second.append(listCard);
            second.hide();
        }

    } catch (error) {
        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ:", error);
        container.html("<p>–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Ñ—Ä—É–∫—Ç–∞—Ö.</p>");
        resultTxt.text(0);
    }
}

function change(id) {
    let toid = id
    window.location.href = `shop-single.html?id=${toid}`
}

$(document).ready(function() {
    loadProducts();
});

async function hidenonlist() {
    const container = $("#listproduct");
    container.hide();
    const toshow = $("#product");
    toshow.show();
}

async function hidelist() {
    const container = $("#product");
    container.hide();
    const toshow = $("#listproduct");
    toshow.show();
}

</script>
        
<script>
document.addEventListener("DOMContentLoaded", async () => {
    const apiUrl = "/api/Fruits/GetAllFruits";

    try {
        const response = await fetch(apiUrl, {
            headers: {
                "ngrok-skip-browser-warning": "true"
            }
        });
        if (!response.ok) throw new Error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ API");
        const fruits = await response.json();

        // === DRIED PRODUCTS ===
        const dropdowns = document.querySelectorAll(".primary-navbar .dropdown");
        let driedDropdown = null;

        dropdowns.forEach(drop => {
            const link = drop.querySelector("a");
            if (link && link.textContent.trim().toLowerCase().includes("dried products")) {
                driedDropdown = drop;
            }
        });

        if (driedDropdown) {
            let driedMenu = driedDropdown.querySelector(".dropdown-menu");
            if (!driedMenu) {
                driedMenu = document.createElement("ul");
                driedMenu.classList.add("dropdown-menu");
                driedDropdown.appendChild(driedMenu);
            } else {
                driedMenu.innerHTML = "";
            }

            const driedFruits = fruits.filter(f => f.name.toLowerCase().includes("dried"));
            driedFruits.forEach(fruit => {
                const li = document.createElement("li");
                li.innerHTML = `<a class="fix-a" href="shop-single-dried.html?id=${fruit.id}">${fruit.name}</a>`;;
                driedMenu.appendChild(li);
            });

            const allLi = document.createElement("li");
            allLi.innerHTML = `<a class="fix-a" href="shop-2.html"><strong>All catalog</strong></a>`;
            driedMenu.appendChild(allLi);
        }

        // === FRESH PRODUCTS ===
        const freshMenu = document.getElementById("fresh");
        if (freshMenu) {
            freshMenu.innerHTML = "";

            const freshFruits = fruits.filter(f => !f.name.toLowerCase().includes("dried"));
            freshFruits.forEach(fruit => {
                const li = document.createElement("li");
                li.innerHTML = `<a class="fix-a" href="shop-single.html?id=${fruit.id}">${fruit.name}</a>`;
                freshMenu.appendChild(li);
            });

            const allFreshLi = document.createElement("li");
            allFreshLi.innerHTML = `<a class="fix-a" href="shop-1.html"><strong>All catalog</strong></a>`;
            freshMenu.appendChild(allFreshLi);
        }

    } catch (err) {
        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ—Ä—É–∫—Ç–æ–≤:", err);
    }
});
</script>
<style>
    .product-media {
    background-color: #fff;
}

/* === –û–±—â–∏–µ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ === */
#listproduct .deal-text p {
    height: 60px;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 3;       /* ‚Üê –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ! —Ä–∞–Ω—å—à–µ –±—ã–ª–æ -webkit-line-break */
    -webkit-box-orient: vertical;
    text-overflow: ellipsis;
    line-height: 1.4em;
    font-size: 14px;
    color: #555;
}
</style>
<style>
    #loading {
    position: fixed; /* –ó–∞–∫—Ä–µ–ø–ª—è–µ–º –Ω–∞ —ç–∫—Ä–∞–Ω–µ */
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #ffffff; /* –¶–≤–µ—Ç —Ñ–æ–Ω–∞, –ø–æ–∫–∞ –∏–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∫–∞ */
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 9999; /* –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –æ–Ω –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ */
}

/* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ª–æ–≥–æ—Ç–∏–ø–∞, —á—Ç–æ–±—ã –µ–≥–æ —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å */
.loader {
    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏, –µ—Å–ª–∏ –Ω—É–∂–Ω—ã, –Ω–æ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –æ–Ω–∏ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã */
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —Å–∞–º–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≥–¥–µ –±—É–¥–µ—Ç –∞–Ω–∏–º–∞—Ü–∏—è */
.loader img {
    width: 100px; /* –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∂–µ–ª–∞–µ–º—ã–π —Ä–∞–∑–º–µ—Ä */
    height: auto;
    /* --- –ö–õ–Æ–ß–ï–í–ê–Ø –ß–ê–°–¢–¨: –ê–ù–ò–ú–ê–¶–ò–Ø --- */
    animation: bounce 1.2s infinite alternate; /* –ü—Ä–∏–º–µ–Ω—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é */
    transform-origin: center; /* –¶–µ–Ω—Ç—Ä, –≤–æ–∫—Ä—É–≥ –∫–æ—Ç–æ—Ä–æ–≥–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è */
}

/* –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–Ω–∏–º–∞—Ü–∏–∏ */
@keyframes bounce {
    /* –ö–∞–¥—Ä—ã –∞–Ω–∏–º–∞—Ü–∏–∏ */
    0% {
        transform: scale(0.9); /* –ù–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ: –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–¥–∞–ª–µ–Ω–æ */
        opacity: 0.8;
    }
    50% {
        transform: scale(1.15); /* –°–µ—Ä–µ–¥–∏–Ω–∞: –Ω–µ–º–Ω–æ–≥–æ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–æ ("–ø—Ä—ã–≥–Ω—É–ª–æ") */
        opacity: 1;
    }
    100% {
        transform: scale(1.0); /* –ö–æ–Ω–µ—Ü: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º—É —Ä–∞–∑–º–µ—Ä—É */
        opacity: 0.9;
    }
}
</style>
    </body>
</html>